<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MAP - Find Your Vibe</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/app.css?v=15" />
</head>
<body>
  <!-- Fundo -->
  <div class="lava-bg" aria-hidden="true">
    <div class="layer back"><div class="gooey"><span class="blob" style="--x:8vw;--s:1.06;--t:29s;--sw:10s;--amp:1.4vw;--b:12px;animation-delay:-3s;"></span><span class="blob" style="--x:41vw;--s:.98;--t:31s;--sw:11.5s;--amp:1.0vw;--b:10px;animation-delay:-12s;"></span><span class="blob" style="--x:57vw;--s:1.14;--t:27s;--sw:9s;--amp:.9vw;--b:11px;animation-delay:-7s;"></span><span class="blob" style="--x:88vw;--s:1.02;--t:30s;--sw:10.5s;--amp:1.6vw;--b:9px;animation-delay:-16s;"></span><span class="blob" style="--x:22vw;--s:.94;--t:33s;--sw:12s;--amp:1.2vw;--b:10px;animation-delay:-20s;"></span><span class="blob" style="--x:72vw;--s:1.18;--t:28s;--sw:8.5s;--amp:.8vw;--b:12px;animation-delay:-9s;"></span></div></div>
    <div class="glow"><span class="wave"></span></div>
  </div>

  <!-- Dock -->
  <nav class="dock" aria-label="Menu rápido">
    <button class="dock-item active" data-view="viewRecs"><svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M3 10h11v2H3v-2zm0 4h11v2H3v-2zM3 6h11v2H3V6zm16-1h2v12h-2V5z"/></svg><span>Recomendações</span></button>
    <button class="dock-item" data-view="viewDayMix"><svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.8 1.42-1.42zM1 13h3v-2H1v2zm10 10h2v-3h-2v3zm9-10v2h3v-2h-3zm-3.95 7.45l1.41 1.41 1.8-1.79-1.41-1.41-1.8 1.79zM13 1h-2v3h2V1zm4.24 3.05l1.8 1.79 1.41-1.41-1.79-1.8-1.42 1.42zM12 6a6 6 0 100 12 6 6 0 000-12z"/></svg><span>Day Mix</span></button>
  </nav>

  <div class="container">
    <header>
      <h1 class="animated-title"><span class="letter">M</span><span class="letter">A</span><span class="letter">P</span></h1>
      <p class="subtitle">Find your vibe</p>
    </header>

    <main class="content">
      <div class="main-buttons">
        <button class="category-btn" data-type="music"><svg viewBox="0 0 24 24"><path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/></svg><span class="category-label">Music</span></button>
        <button class="category-btn" data-type="album"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/></svg><span class="category-label">Album</span></button>
        <button class="category-btn" data-type="artist"><svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg><span class="category-label">Artist</span></button>
      </div>

      <!-- Views -->
      <section class="view active" id="viewRecs"><div class="recommendations-section"><h2>Recomendações</h2><div class="recommendations-scroller"><div class="recs-group"><div class="recs-header"><h3>Músicas</h3><span class="recs-count" id="countMusic">0</span></div><div class="recommendations-grid" id="recsMusic"></div><div class="recs-empty" id="recsMusicEmpty">...</div></div><div class="recs-group"><div class="recs-header"><h3>Álbuns</h3><span class="recs-count" id="countAlbum">0</span></div><div class="recommendations-grid" id="recsAlbum"></div><div class="recs-empty" id="recsAlbumEmpty">...</div></div><div class="recs-group"><div class="recs-header"><h3>Artistas</h3><span class="recs-count" id="countArtist">0</span></div><div class="recommendations-grid" id="recsArtist"></div><div class="recs-empty" id="recsArtistEmpty">...</div></div></div></div></section>
      <section class="view" id="viewDayMix"><div class="recommendations-section"><h2>Day Mix</h2><div class="recommendations-scroller"><form class="daymix-form" id="dayMixForm"><div class="autocomplete-wrapper"><input type="text" id="daySeedInput" placeholder="Ex.: Wonderwall - Oasis" autocomplete="off" required /><div class="suggestions-box" id="daySeedSuggestions"></div></div><button class="submit-btn" id="dayGenerateBtn" type="submit">Gerar</button></form><div class="recs-group"><div class="recs-header"><h3>Sua Mix</h3><span class="recs-count" id="dayMixCount">0</span></div><div class="recommendations-grid" id="dayMixGrid"></div><div class="recs-empty" id="dayMixEmpty">Informe uma música.</div></div></div></div></section>
      <section class="favorites-section" id="favoritesSection"><h2>Seus Favoritos</h2><div class="favorites-grid" id="favoritesGrid"></div></section>
    </main>

    <!-- Bloco do Usuário no Rodapé -->
    <div class="user-info-wrapper" id="userInfoWrapper">
        <div id="spotifyLogin" style="display: none;">
            <button onclick="connectSpotify()" class="spotify-btn">Conectar com Spotify</button>
        </div>
        <div class="user-info" id="userInfo" style="display:none">
            <div class="user-avatar" id="userAvatar"></div>
            <span id="username"></span>
            <button class="logout-btn" onclick="logout()" title="Sair"><svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/></svg><span>Sair</span></button>
        </div>
    </div>

    <div class="version-tag">v0.6</div>
  </div>

  <!-- Modals -->
  <div class="modal" id="confirmModal"><div class="modal-content confirm"><div class="modal-header"><h2 id="confirmTitle">Confirmar</h2><button class="close-btn" data-confirm-cancel>&times;</button></div><p id="confirmMessage">Tem certeza?</p><div class="confirm-actions"><button class="submit-btn danger" data-confirm-ok>Sim</button><button class="submit-btn ghost" data-confirm-cancel>Cancelar</button></div></div></div>
  <div class="modal" id="inputModal"><div class="modal-content"><div class="modal-header"><h2 id="modalTitle">Adicionar</h2><button class="close-btn" id="closeBtn">&times;</button></div><form id="addForm"><div class="form-group autocomplete-wrapper"><label for="itemName">Música, Álbum ou Artista</label><input id="itemName" autocomplete="off" required placeholder="Ex: Wonderwall - Oasis" /><div class="suggestions-box" id="itemNameSuggestions"></div></div><button class="submit-btn" id="submitBtn"><span>Adicionar</span></button></form></div></div>

  <div class="loading-overlay" id="loadingOverlay"><div class="loading-spinner"></div></div>
  <script src="js/autocomplete.js" defer></script>
  <script src="js/script.js" defer></script>
</body>
</html>